<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplement Interaction Checker - WUKSY | AI-Powered Wellness Insights</title>
    <meta name="description" content="Check your supplement interactions safely with WUKSY's AI-powered tool. Ensure your supplements work together effectively for optimal wellness.">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* WUKSY Brand Colors */
            --primary-50: #f6f8f6;
            --primary-100: #e8f0e8;
            --primary-200: #d3e4d3;
            --primary-300: #b3d1b3;
            --primary-400: #8bb88b;
            --primary-500: #6b9d6b;
            --primary-600: #5a8a5a;
            --primary-700: #4a724a;
            --primary-800: #3d5d3d;
            --primary-900: #334d33;

            --neutral-50: #fafafa;
            --neutral-100: #f7f7f7;
            --neutral-200: #f0f0f0;
            --neutral-300: #e8e8e8;
            --neutral-400: #d1d1d1;
            --neutral-500: #a3a3a3;
            --neutral-600: #737373;
            --neutral-700: #525252;
            --neutral-800: #404040;
            --neutral-900: #262626;

            --stone-50: #fafaf9;
            --stone-100: #f5f5f4;
            --stone-500: #78716c;
            --stone-600: #57534e;
        }
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
            line-height: 1.6;
            color: var(--neutral-800);
            background-color: var(--neutral-50);
            overflow-x: hidden;
        }
        
        /* Zen-inspired animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Typography */
        .zen-text {
            color: var(--primary-600);
        }

        .zen-gradient {
            background: linear-gradient(135deg, var(--primary-50) 0%, var(--stone-50) 100%);
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(232, 232, 232, 0.5);
            position: sticky;
            top: 0;
            z-index: 50;
            transition: all 0.3s ease;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 4rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: var(--neutral-800);
        }

        .logo-svg {
            height: 2rem;
            width: auto;
            max-width: 120px;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            padding: 3rem 0 2rem;
            text-align: center;
            background: linear-gradient(135deg, var(--neutral-50) 0%, rgba(246, 248, 246, 0.5) 100%);
        }

        .hero-content {
            max-width: 48rem;
            margin: 0 auto;
            padding: 0 2rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.2s forwards;
        }

        .hero-section h1 {
            font-size: 2.5rem;
            font-weight: 300;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: var(--neutral-800);
        }

        .hero-section .zen-text {
            display: block;
            font-weight: 500;
        }

        .hero-section p {
            font-size: 1.125rem;
            color: var(--neutral-600);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .coming-soon-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-50);
            color: var(--primary-700);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            border: 1px solid var(--primary-100);
        }
        
        .medical-disclaimer {
            background: rgba(255, 243, 205, 0.3);
            border: 1px solid var(--primary-200);
            color: var(--primary-700);
            padding: 1rem;
            margin: 2rem 0;
            border-radius: 0.75rem;
            text-align: center;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .content {
            padding: 2rem 1rem;
        }
        
        .input-section {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.4s forwards;
        }

        .input-section:hover {
            box-shadow: 0 4px 12px rgba(107, 157, 107, 0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--neutral-800);
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .section-description {
            color: var(--neutral-600);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .supplement-input-group {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .supplement-select,
        .dose-input,
        .timing-select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--neutral-300);
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: 'Inter', system-ui, sans-serif;
            transition: all 0.3s ease;
            background: white;
        }

        .supplement-select {
            flex: 2;
            min-width: 250px;
        }
        
        .dose-input {
            flex: 1;
            min-width: 120px;
        }
        
        .timing-select {
            flex: 1;
            min-width: 120px;
        }
        
        .supplement-select:focus,
        .dose-input:focus,
        .timing-select:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(107, 157, 107, 0.1);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Inter', system-ui, sans-serif;
        }

        .btn-primary {
            background: var(--primary-500);
            color: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:hover {
            background: var(--primary-600);
            box-shadow: 0 4px 12px rgba(107, 157, 107, 0.3);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--stone-100);
            color: var(--stone-700);
            border: 1px solid var(--stone-200);
        }

        .btn-secondary:hover {
            background: var(--stone-200);
        }

        .btn-ghost {
            background: transparent;
            color: var(--primary-600);
            border: 1px solid var(--primary-300);
        }

        .btn-ghost:hover {
            background: var(--primary-50);
            border-color: var(--primary-400);
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }
        
        .remove-btn:hover {
            background: #c82333;
            transform: translateY(-1px);
        }
        
        .add-btn {
            background: var(--primary-500);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            margin-top: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .add-btn:hover {
            background: var(--primary-600);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(107, 157, 107, 0.3);
        }
        
        .check-btn {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            border: none;
            padding: 1.25rem 2.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            border-radius: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 2rem auto;
            box-shadow: 0 4px 15px rgba(107, 157, 107, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .check-btn:hover {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(107, 157, 107, 0.4);
        }

        .check-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .check-btn:hover::before {
            left: 100%;
        }
        
        .results-section {
            display: none;
            margin-top: 2rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.6s forwards;
        }
        
        .result-card {
            margin-bottom: 1.5rem;
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid;
            transition: all 0.3s ease;
            background: white;
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .result-safe {
            background: rgba(16, 185, 129, 0.05);
            border-color: rgba(16, 185, 129, 0.2);
            color: #065f46;
        }
        
        .result-caution {
            background: rgba(245, 158, 11, 0.05);
            border-color: rgba(245, 158, 11, 0.2);
            color: #92400e;
        }
        
        .result-warning {
            background: rgba(239, 68, 68, 0.05);
            border-color: rgba(239, 68, 68, 0.2);
            color: #991b1b;
        }
        
        .result-icon {
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
        
        .result-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }
        
        .result-description {
            margin-bottom: 1rem;
            line-height: 1.6;
            color: var(--neutral-700);
        }
        
        .recommendations {
            background: rgba(255, 255, 255, 0.7);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 0.75rem;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .recommendations h4 {
            margin-bottom: 0.5rem;
            color: var(--neutral-800);
            font-weight: 600;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .recommendations p {
            margin: 0;
            color: var(--neutral-700);
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .summary-section {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(107, 157, 107, 0.3);
        }
        
        .summary-score {
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
        }
        
        .timing-chart {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            color: var(--neutral-800);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .timing-chart h3 {
            margin-bottom: 1rem;
            color: var(--primary-600);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .time-slot {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 0.5rem;
            border-left: 4px solid var(--primary-500);
        }
        
        .time-label {
            font-weight: 500;
            color: var(--neutral-700);
            min-width: 120px;
        }
        
        .supplements-list {
            flex: 1;
            margin-left: 1rem;
            color: var(--neutral-600);
            font-size: 0.875rem;
        }
        
        .cta-section {
            background: var(--neutral-900);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .cta-section h2 {
            margin-bottom: 1rem;
            font-size: 1.875rem;
            font-weight: 300;
        }

        .cta-section .zen-text {
            color: var(--primary-400);
        }
        
        .cta-section p {
            margin-bottom: 1.5rem;
            opacity: 0.9;
            color: var(--neutral-300);
            line-height: 1.6;
        }
        
        .signup-form {
            display: flex;
            gap: 0.75rem;
            max-width: 28rem;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        
        .signup-form input {
            flex: 1;
            padding: 0.875rem 1rem;
            border: 1px solid var(--neutral-600);
            border-radius: 0.5rem;
            font-size: 1rem;
            background: white;
            color: var(--neutral-800);
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .signup-form input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(107, 157, 107, 0.1);
        }
        
        .signup-btn {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            border: none;
            padding: 0.875rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(107, 157, 107, 0.3);
        }
        
        .signup-btn:hover {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(107, 157, 107, 0.4);
        }

        /* Footer */
        .footer {
            background: var(--neutral-900);
            color: white;
            padding: 3rem 1rem 2rem;
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
            padding: 0 2rem;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .footer-icon-svg {
            height: 1.5rem;
            width: auto;
            margin-right: 0.5rem;
        }

        .footer p {
            color: var(--neutral-400);
            margin-bottom: 1rem;
        }

        .medical-disclaimer-footer {
            border-top: 1px solid var(--neutral-700);
            padding-top: 2rem;
            margin-top: 2rem;
            font-size: 0.875rem;
            color: var(--neutral-500);
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: var(--neutral-100);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neutral-400);
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--neutral-500);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2rem;
            }
            
            .hero-content {
                padding: 0 1rem;
            }
            
            .content {
                padding: 1.5rem 1rem;
            }
            
            .input-section {
                padding: 1.5rem;
            }
            
            .supplement-input-group {
                flex-direction: column;
            }
            
            .supplement-select,
            .dose-input,
            .timing-select {
                min-width: 100%;
            }
            
            .signup-form {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .signup-form input {
                margin-bottom: 0;
                min-width: 100%;
            }

            .header-container {
                padding: 0 1rem;
            }

            .footer-container {
                padding: 0 1rem;
            }

            .cta-section {
                padding: 2rem 1rem;
            }

            .check-btn {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
        }

        @media (min-width: 768px) {
            .hero-section {
                padding: 4rem 0 3rem;
            }
            
            .hero-section h1 {
                font-size: 3rem;
            }

            .signup-form {
                flex-direction: row;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <img src="logo_clean.svg" alt="WUKSY" class="logo-svg" />
            </a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="coming-soon-badge animate-float">
                <i data-lucide="flask-conical" width="16" height="16"></i>
                <span>AI-Powered Analysis</span>
            </div>
            
            <h1>
                Ensure Your Supplements Work
                <span class="zen-text">In Perfect Harmony</span>
            </h1>
            
            <p>
                Check for interactions and optimize your supplement timing with our thoughtful AI-powered tool. 
                Find peace of mind in your wellness journey through careful supplement coordination.
            </p>
        </div>
    </section>

    <div class="container">
        <div class="medical-disclaimer">
            <i data-lucide="shield-alert" width="16" height="16" style="vertical-align: middle; margin-right: 0.5rem;"></i>
            This tool provides educational guidance only. Always consult with qualified healthcare professionals before making changes to your supplement routine.
        </div>
        
        <div class="content">
            <div class="input-section">
                <h2 class="section-title">
                    <i data-lucide="pill" width="24" height="24" style="vertical-align: middle; margin-right: 0.5rem; color: var(--primary-600);"></i>
                    Your Current Supplement Stack
                </h2>
                <p class="section-description">
                    Add all supplements, vitamins, and medications you're currently taking. Our AI will analyze potential interactions and suggest optimal timing for your wellness journey.
                </p>
                
                <div id="supplementsContainer">
                    <div class="supplement-input-group">
                        <select class="supplement-select" onchange="updateInteractions()">
                            <option value="">Select supplement...</option>
                            <option value="vitamin_d">Vitamin D3</option>
                            <option value="vitamin_c">Vitamin C</option>
                            <option value="b12">Vitamin B12</option>
                            <option value="b_complex">B-Complex</option>
                            <option value="iron">Iron</option>
                            <option value="calcium">Calcium</option>
                            <option value="magnesium">Magnesium</option>
                            <option value="zinc">Zinc</option>
                            <option value="omega3">Omega-3 Fish Oil</option>
                            <option value="coq10">CoQ10</option>
                            <option value="curcumin">Curcumin</option>
                            <option value="probiotics">Probiotics</option>
                            <option value="multivitamin">Multivitamin</option>
                            <option value="ashwagandha">Ashwagandha</option>
                            <option value="melatonin">Melatonin</option>
                            <option value="caffeine">Caffeine/Pre-workout</option>
                            <option value="creatine">Creatine</option>
                            <option value="protein">Protein Powder</option>
                            <option value="vitamin_k">Vitamin K2</option>
                            <option value="biotin">Biotin</option>
                            <option value="folic_acid">Folic Acid/Folate</option>
                            <option value="green_tea">Green Tea Extract</option>
                        </select>
                        <input type="text" class="dose-input" placeholder="Dose (e.g., 1000mg)" onchange="updateInteractions()">
                        <select class="timing-select" onchange="updateInteractions()">
                            <option value="morning">Morning</option>
                            <option value="afternoon">Afternoon</option>
                            <option value="evening">Evening</option>
                            <option value="bedtime">Bedtime</option>
                            <option value="with_meals">With meals</option>
                            <option value="empty_stomach">Empty stomach</option>
                        </select>
                        <button class="remove-btn" onclick="removeSupplementRow(this)" style="display: none;">Remove</button>
                    </div>
                </div>
                
                <button class="add-btn" onclick="addSupplementRow()">
                    <i data-lucide="plus" width="16" height="16"></i>
                    Add Another Supplement
                </button>
                
                <button class="check-btn" onclick="checkInteractions()">
                    <i data-lucide="sparkles" width="20" height="20" style="margin-right: 0.5rem;"></i>
                    Analyze My Wellness Stack
                </button>
            </div>
            
            <div class="results-section" id="resultsSection">
                <h2 class="section-title">
                    <i data-lucide="brain" width="24" height="24" style="vertical-align: middle; margin-right: 0.5rem; color: var(--primary-600);"></i>
                    Your Personalized Wellness Insights
                </h2>
                <div id="interactionResults">
                    <!-- Dynamic results will appear here -->
                </div>
                
                <div class="summary-section" id="summarySection">
                    <div class="summary-score" id="safetyScore">85</div>
                    <h2>Safety Score</h2>
                    <p id="scoreDescription">Your supplement stack is generally safe with minor optimization opportunities</p>
                    
                    <div class="timing-chart" id="timingChart">
                        <h3>
                            <i data-lucide="clock" width="20" height="20"></i>
                            Optimal Timing Schedule
                        </h3>
                        <div id="timingSchedule">
                            <!-- Dynamic timing recommendations -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="cta-section">
            <h2>
                Want <span class="zen-text">Deeper Wellness Insights?</span>
            </h2>
            <p>This tool provides basic interactions. The full WUKSY platform offers AI-powered personalized recommendations based on your blood work and complete health profile.</p>
            <p><strong>🌱 Get 50% OFF your first WUKSY analysis + personalized supplement protocol</strong></p>
            
            <form class="signup-form" id="signupForm">
                <input type="email" placeholder="Enter your email for early access" required id="emailInput">
                <button type="submit" class="signup-btn">
                    <i data-lucide="sparkles" width="16" height="16" style="margin-right: 0.25rem;"></i>
                    Join Early Access
                </button>
            </form>
            
            <p style="margin-top: 1rem; font-size: 0.875rem; opacity: 0.7;">
                <i data-lucide="shield-check" width="14" height="14" style="vertical-align: middle; margin-right: 0.25rem;"></i>
                Join 2,847+ people finding peace in their wellness journey
            </p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="logo_clean.svg" alt="WUKSY Icon" class="footer-icon-svg" />
            </div>
            
            <p>AI-Powered Personalized Wellness Platform</p>
            
            <div class="medical-disclaimer-footer">
                <p>
                    <strong>Medical Disclaimer:</strong> WUKSY provides educational information only and is not intended to diagnose, treat, cure, or prevent any disease. 
                    Always consult with qualified healthcare professionals before making health decisions.
                </p>
                <p style="margin-top: 1rem;">
                    © 2024 WUKSY. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
        const supplementData = {
            vitamin_d: { name: "Vitamin D3", category: "fat_soluble", absorption: "with_fat" },
            vitamin_c: { name: "Vitamin C", category: "water_soluble", absorption: "any_time" },
            b12: { name: "Vitamin B12", category: "water_soluble", absorption: "morning" },
            b_complex: { name: "B-Complex", category: "water_soluble", absorption: "morning" },
            iron: { name: "Iron", category: "mineral", absorption: "empty_stomach" },
            calcium: { name: "Calcium", category: "mineral", absorption: "with_food" },
            magnesium: { name: "Magnesium", category: "mineral", absorption: "evening" },
            zinc: { name: "Zinc", category: "mineral", absorption: "empty_stomach" },
            omega3: { name: "Omega-3 Fish Oil", category: "fat_soluble", absorption: "with_fat" },
            coq10: { name: "CoQ10", category: "fat_soluble", absorption: "with_fat" },
            curcumin: { name: "Curcumin", category: "herb", absorption: "with_fat" },
            probiotics: { name: "Probiotics", category: "other", absorption: "empty_stomach" },
            multivitamin: { name: "Multivitamin", category: "mixed", absorption: "with_food" },
            ashwagandha: { name: "Ashwagandha", category: "herb", absorption: "with_food" },
            melatonin: { name: "Melatonin", category: "hormone", absorption: "bedtime" },
            caffeine: { name: "Caffeine", category: "stimulant", absorption: "morning" },
            creatine: { name: "Creatine", category: "amino_acid", absorption: "any_time" },
            protein: { name: "Protein Powder", category: "amino_acid", absorption: "post_workout" },
            vitamin_k: { name: "Vitamin K2", category: "fat_soluble", absorption: "with_fat" },
            biotin: { name: "Biotin", category: "water_soluble", absorption: "morning" },
            folic_acid: { name: "Folic Acid", category: "water_soluble", absorption: "morning" },
            green_tea: { name: "Green Tea Extract", category: "herb", absorption: "between_meals" }
        };

        const interactions = {
            // Negative interactions
            negative: [
                {
                    supplements: ["iron", "calcium"],
                    severity: "high",
                    description: "Calcium significantly reduces iron absorption",
                    recommendation: "Take iron and calcium at least 2 hours apart"
                },
                {
                    supplements: ["iron", "zinc"],
                    severity: "medium",
                    description: "Iron and zinc compete for absorption",
                    recommendation: "Take on alternating days or separate by 2+ hours"
                },
                {
                    supplements: ["calcium", "magnesium"],
                    severity: "low",
                    description: "High doses can compete for absorption",
                    recommendation: "Keep calcium:magnesium ratio at 2:1, can take together"
                },
                {
                    supplements: ["caffeine", "melatonin"],
                    severity: "high",
                    description: "Caffeine counteracts melatonin's sleep effects",
                    recommendation: "Avoid caffeine 6+ hours before melatonin"
                },
                {
                    supplements: ["green_tea", "iron"],
                    severity: "medium",
                    description: "Tannins in green tea reduce iron absorption",
                    recommendation: "Separate by 1-2 hours"
                }
            ],
            // Positive interactions
            positive: [
                {
                    supplements: ["vitamin_d", "vitamin_k"],
                    description: "K2 helps direct calcium from D3 to bones, not arteries",
                    recommendation: "Excellent combination - take together with fat"
                },
                {
                    supplements: ["iron", "vitamin_c"],
                    description: "Vitamin C dramatically increases iron absorption",
                    recommendation: "Take iron with 100mg+ vitamin C"
                },
                {
                    supplements: ["magnesium", "vitamin_d"],
                    description: "Magnesium is needed to activate vitamin D",
                    recommendation: "Essential combination for optimal vitamin D function"
                },
                {
                    supplements: ["curcumin", "omega3"],
                    description: "Both support anti-inflammatory pathways",
                    recommendation: "Synergistic for reducing inflammation"
                },
                {
                    supplements: ["b_complex", "magnesium"],
                    description: "B6 enhances magnesium uptake into cells",
                    recommendation: "Great combination for energy and nervous system"
                }
            ]
        };

        function addSupplementRow() {
            const container = document.getElementById('supplementsContainer');
            const newRow = document.createElement('div');
            newRow.className = 'supplement-input-group';
            
            newRow.innerHTML = `
                <select class="supplement-select" onchange="updateInteractions()">
                    <option value="">Select supplement...</option>
                    <option value="vitamin_d">Vitamin D3</option>
                    <option value="vitamin_c">Vitamin C</option>
                    <option value="b12">Vitamin B12</option>
                    <option value="b_complex">B-Complex</option>
                    <option value="iron">Iron</option>
                    <option value="calcium">Calcium</option>
                    <option value="magnesium">Magnesium</option>
                    <option value="zinc">Zinc</option>
                    <option value="omega3">Omega-3 Fish Oil</option>
                    <option value="coq10">CoQ10</option>
                    <option value="curcumin">Curcumin</option>
                    <option value="probiotics">Probiotics</option>
                    <option value="multivitamin">Multivitamin</option>
                    <option value="ashwagandha">Ashwagandha</option>
                    <option value="melatonin">Melatonin</option>
                    <option value="caffeine">Caffeine/Pre-workout</option>
                    <option value="creatine">Creatine</option>
                    <option value="protein">Protein Powder</option>
                    <option value="vitamin_k">Vitamin K2</option>
                    <option value="biotin">Biotin</option>
                    <option value="folic_acid">Folic Acid/Folate</option>
                    <option value="green_tea">Green Tea Extract</option>
                </select>
                <input type="text" class="dose-input" placeholder="Dose (e.g., 1000mg)" onchange="updateInteractions()">
                <select class="timing-select" onchange="updateInteractions()">
                    <option value="morning">Morning</option>
                    <option value="afternoon">Afternoon</option>
                    <option value="evening">Evening</option>
                    <option value="bedtime">Bedtime</option>
                    <option value="with_meals">With meals</option>
                    <option value="empty_stomach">Empty stomach</option>
                </select>
                <button class="remove-btn" onclick="removeSupplementRow(this)">Remove</button>
            `;
            
            container.appendChild(newRow);
            updateRemoveButtons();
        }

        function removeSupplementRow(button) {
            button.closest('.supplement-input-group').remove();
            updateRemoveButtons();
            updateInteractions();
        }

        function updateRemoveButtons() {
            const rows = document.querySelectorAll('.supplement-input-group');
            rows.forEach((row, index) => {
                const removeBtn = row.querySelector('.remove-btn');
                removeBtn.style.display = index === 0 ? 'none' : 'block';
            });
        }

        function getCurrentSupplements() {
            const rows = document.querySelectorAll('.supplement-input-group');
            const supplements = [];
            
            rows.forEach(row => {
                const select = row.querySelector('.supplement-select');
                const dose = row.querySelector('.dose-input');
                const timing = row.querySelector('.timing-select');
                
                if (select.value) {
                    supplements.push({
                        id: select.value,
                        name: supplementData[select.value]?.name || select.value,
                        dose: dose.value,
                        timing: timing.value,
                        data: supplementData[select.value]
                    });
                }
            });
            
            return supplements;
        }

        async function checkInteractions() {
            const supplements = getCurrentSupplements();
            
            if (supplements.length < 2) {
                alert('Please add at least 2 supplements to check for interactions.');
                return;
            }
            
            // Track analysis start
            await WUKSY.trackEvent('analysis_start', 'supplement', {
                supplement_count: supplements.length,
                supplement_names: supplements.map(s => s.name)
            });
            
            const results = analyzeInteractions(supplements);
            
            // Store results globally
            window.currentSupplementAnalysis = {
                supplements,
                results,
                safetyScore: results.safetyScore
            };
            
            displayResults(results, supplements);
            
            // Track analysis completion
            await WUKSY.trackEvent('analysis_completed', 'supplement', {
                safety_score: results.safetyScore,
                supplement_count: supplements.length,
                negative_interactions: results.negative.length,
                positive_interactions: results.positive.length
            });
            
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function analyzeInteractions(supplements) {
            const results = {
                negative: [],
                positive: [],
                safetyScore: 100
            };
            
            // Check for negative interactions
            interactions.negative.forEach(interaction => {
                const userHas = interaction.supplements.filter(sup => 
                    supplements.some(userSup => userSup.id === sup)
                );
                
                if (userHas.length === interaction.supplements.length) {
                    results.negative.push({
                        ...interaction,
                        userSupplements: userHas.map(id => supplementData[id]?.name || id)
                    });
                    
                    // Reduce safety score based on severity
                    if (interaction.severity === 'high') results.safetyScore -= 25;
                    else if (interaction.severity === 'medium') results.safetyScore -= 15;
                    else results.safetyScore -= 5;
                }
            });
            
            // Check for positive interactions
            interactions.positive.forEach(interaction => {
                const userHas = interaction.supplements.filter(sup => 
                    supplements.some(userSup => userSup.id === sup)
                );
                
                if (userHas.length === interaction.supplements.length) {
                    results.positive.push({
                        ...interaction,
                        userSupplements: userHas.map(id => supplementData[id]?.name || id)
                    });
                    
                    // Bonus points for good combinations
                    results.safetyScore += 5;
                }
            });
            
            results.safetyScore = Math.max(30, Math.min(100, results.safetyScore));
            return results;
        }

        function displayResults(results, supplements) {
            const container = document.getElementById('interactionResults');
            container.innerHTML = '';
            
            // Display negative interactions
            if (results.negative.length > 0) {
                results.negative.forEach(interaction => {
                    const card = createResultCard(interaction, 'warning');
                    container.appendChild(card);
                });
            }
            
            // Display positive interactions
            if (results.positive.length > 0) {
                results.positive.forEach(interaction => {
                    const card = createResultCard(interaction, 'safe');
                    container.appendChild(card);
                });
            }
            
            // If no interactions found
            if (results.negative.length === 0 && results.positive.length === 0) {
                const card = document.createElement('div');
                card.className = 'result-card result-caution';
                card.innerHTML = `
                    <div class="result-title">
                        <span class="result-icon">ℹ️</span>
                        No Major Interactions Detected
                    </div>
                    <div class="result-description">
                        Your current supplement combination doesn't show any major known interactions in our database. However, consider optimal timing and absorption factors for best results.
                    </div>
                `;
                container.appendChild(card);
            }
            
            updateSummary(results, supplements);
        }

        function createResultCard(interaction, type) {
            const card = document.createElement('div');
            let iconMap = {
                'safe': '✅',
                'caution': '⚠️',  
                'warning': '❌'
            };
            
            if (interaction.severity === 'high') type = 'warning';
            else if (interaction.severity === 'medium') type = 'caution';
            else if (interaction.supplements) type = 'safe'; // positive interaction
            
            card.className = `result-card result-${type}`;
            
            const title = interaction.userSupplements ? 
                interaction.userSupplements.join(' + ') : 
                interaction.supplements.map(s => supplementData[s]?.name || s).join(' + ');
            
            card.innerHTML = `
                <div class="result-title">
                    <span class="result-icon">${iconMap[type]}</span>
                    ${title}
                </div>
                <div class="result-description">
                    ${interaction.description}
                </div>
                <div class="recommendations">
                    <h4>💡 Recommendation:</h4>
                    <p>${interaction.recommendation}</p>
                </div>
            `;
            
            return card;
        }

        function updateSummary(results, supplements) {
            const scoreElement = document.getElementById('safetyScore');
            const descElement = document.getElementById('scoreDescription');
            
            scoreElement.textContent = results.safetyScore;
            
            let description = '';
            if (results.safetyScore >= 85) {
                description = 'Excellent! Your supplement stack is well-optimized with great synergistic combinations.';
            } else if (results.safetyScore >= 70) {
                description = 'Good foundation with room for optimization. Consider timing adjustments.';
            } else if (results.safetyScore >= 50) {
                description = 'Some concerning interactions detected. Review timing and combinations.';
            } else {
                description = 'Multiple significant interactions found. Consider consulting with a healthcare provider.';
            }
            
            descElement.textContent = description;
            
            generateTimingSchedule(supplements);
        }

        function generateTimingSchedule(supplements) {
            const schedule = {
                'Morning (Empty)': [],
                'Morning (With Food)': [],
                'Afternoon': [],
                'Evening (With Food)': [],
                'Before Bed': []
            };
            
            supplements.forEach(supp => {
                const data = supp.data;
                const userTiming = supp.timing;
                
                // Optimal timing based on supplement properties
                let optimalTime = 'Morning (With Food)'; // default
                
                if (data) {
                    if (data.absorption === 'empty_stomach') optimalTime = 'Morning (Empty)';
                    else if (data.absorption === 'evening') optimalTime = 'Evening (With Food)';
                    else if (data.absorption === 'bedtime') optimalTime = 'Before Bed';
                    else if (data.absorption === 'with_fat') optimalTime = 'Morning (With Food)';
                }
                
                // Special cases
                if (supp.id === 'melatonin') optimalTime = 'Before Bed';
                if (supp.id === 'caffeine') optimalTime = 'Morning (Empty)';
                if (supp.id === 'magnesium') optimalTime = 'Evening (With Food)';
                
                schedule[optimalTime].push(`${supp.name} (${supp.dose || 'as directed'})`);
            });
            
            const container = document.getElementById('timingSchedule');
            container.innerHTML = '';
            
            Object.entries(schedule).forEach(([time, supps]) => {
                if (supps.length > 0) {
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.innerHTML = `
                        <div class="time-label">${time}</div>
                        <div class="supplements-list">${supps.join(', ')}</div>
                    `;
                    container.appendChild(timeSlot);
                }
            });
        }

        function updateInteractions() {
            // Real-time updates could be added here
        }

        // Handle signup with supplement analysis data
        document.getElementById('signupForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('emailInput').value;
            const button = this.querySelector('button[type="submit"]');
            
            // Validate email
            if (!WUKSY.isValidEmail(email)) {
                WUKSY.showErrorMessage(this, 'Please enter a valid email address.');
                return;
            }
            
            // Show loading state
            WUKSY.setButtonLoading(button, true, 'Joining...');
            
            try {
                // Get current analysis data
                const supplementData = window.currentSupplementAnalysis || {};
                
                // Capture email with supplement context
                const result = await WUKSY.captureEmail(email, 'supplement', {
                    source_page: 'supplement_checker',
                    safety_score: supplementData.safetyScore,
                    supplement_count: supplementData.supplements ? supplementData.supplements.length : 0,
                    has_analysis: !!supplementData.safetyScore
                });
                
                if (result.success) {
                    // Save supplement analysis if available
                    if (supplementData.supplements && supplementData.results) {
                        await WUKSY.saveSupplementAnalysis(
                            email,
                            supplementData.supplements,
                            supplementData.results,
                            supplementData.safetyScore,
                            {} // timing recommendations would go here
                        );
                    }
                    
                    // Success state
                    button.innerHTML = '<i data-lucide="check" width="16" height="16" style="margin-right: 0.25rem;"></i> Analysis Saved!';
                    button.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    
                    // Show personalized success message
                    const scoreText = supplementData.safetyScore ? ` Your supplement safety score of ${supplementData.safetyScore}/100 has been saved!` : '';
                    const supplementText = supplementData.supplements && supplementData.supplements.length > 0 ? 
                        ` Your ${supplementData.supplements.length} supplement analysis is complete.` : '';
                    const message = result.isNew ? 
                        `🌱 Welcome to your wellness journey!${scoreText}${supplementText} Check your email for your early access details and 50% discount code.` :
                        `Welcome back!${scoreText}${supplementText} Your analysis has been updated.`;
                    
                    WUKSY.showSuccessMessage(this, message);
                    
                    // Track conversion
                    await WUKSY.trackEvent('conversion', 'supplement', { 
                        email,
                        safety_score: supplementData.safetyScore,
                        supplement_count: supplementData.supplements ? supplementData.supplements.length : 0
                    });
                    
                    // Reset form after delay
                    setTimeout(() => {
                        WUKSY.setButtonLoading(button, false);
                        button.style.background = '';
                        this.reset();
                    }, 5000);
                } else {
                    throw new Error(result.error || 'Failed to sign up');
                }
                
            } catch (error) {
                console.error('Signup error:', error);
                WUKSY.setButtonLoading(button, false);
                WUKSY.showErrorMessage(this, 'Something went wrong. Please try again.');
            }
        });

        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
                header.style.boxShadow = '0 1px 3px rgba(0, 0, 0, 0.1)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.8)';
                header.style.boxShadow = 'none';
            }
        });

        // Add CSS animation for spinning loader
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    </script>

    <!-- Supabase Configuration -->
    <script src="js/config.js"></script>
    
    <!-- Supabase Utilities -->
    <script src="js/supabase-utils.js"></script>
</body>
</html>